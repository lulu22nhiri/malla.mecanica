<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular Ingeniería Mecánica - UTEC</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f7fa;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .ciclo {
      display: inline-block;
      vertical-align: top;
      width: 280px;
      margin: 10px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      padding: 15px;
    }
    .ciclo h2 {
      font-size: 1.1rem;
      color: #2980b9;
      margin-bottom: 10px;
    }
    .curso {
      background-color: #ecf0f1;
      margin-bottom: 8px;
      padding: 8px;
      border-radius: 5px;
      cursor: pointer;
      position: relative;
    }
    .curso.aprobado {
      background-color: #2ecc71;
      color: white;
      text-decoration: line-through;
    }
    .curso.bloqueado {
      background-color: #bdc3c7;
      color: #7f8c8d;
      cursor: not-allowed;
    }
    .curso:hover:not(.bloqueado) {
      background-color: #d0e6f7;
    }
    .tooltip {
      visibility: hidden;
      background-color: #34495e;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -60px;
      opacity: 0;
      transition: opacity 0.3s;
      width: 120px;
    }
    .curso:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular Ingeniería Mecánica - UTEC</h1>
  <div id="contenedor"></div>

  <script>
    const cursos = [
      { ciclo: 'Ciclo 1', cursos: [
        { id: 'prog1', nombre: 'Programación I (4 cr.)' },
        { id: 'calc1', nombre: 'Cálculo de una Variable (4 cr.)' },
        { id: 'quim', nombre: 'Química General + Lab. (4 cr.)' },
        { id: 'introIng', nombre: 'Introducción a la Ingeniería Mecánica (2 cr.)' },
        { id: 'com1', nombre: 'Lab. Comunicación I (3 cr.)' },
        { id: 'proy1', nombre: 'Proyectos Interdisciplinarios I (3 cr.)' },
      ]},
      { ciclo: 'Ciclo 2', cursos: [
        { id: 'mec1', nombre: 'Introducción a la Mecánica (4 cr.)', prerreq: ['calc1'] },
        { id: 'prog2', nombre: 'Programación II (4 cr.)', prerreq: ['prog1'] },
        { id: 'calcVec', nombre: 'Cálculo Vectorial (3 cr.)', prerreq: ['calc1'] },
        { id: 'algebra', nombre: 'Álgebra Lineal (2 cr.)' },
        { id: 'estad1', nombre: 'Estadística I (4 cr.)', prerreq: ['calc1'] },
        { id: 'com2', nombre: 'Lab. Comunicación II (3 cr.)' },
      ]},
      { ciclo: 'Ciclo 3', cursos: [
        { id: 'elecmag', nombre: 'Electricidad y Magnetismo (4 cr.)', prerreq: ['calcVec'] },
        { id: 'termo', nombre: 'Termodinámica (4 cr.)', prerreq: ['calcVec'] },
        { id: 'ecdiff', nombre: 'Ecuaciones Diferenciales (3 cr.)', prerreq: ['calc1'] },
        { id: 'diseno', nombre: 'Dibujo y Diseño para Ingeniería (4 cr.)' },
        { id: 'sociedad', nombre: 'Temas Sociedad Contemporánea (3 cr.)' },
        { id: 'proy2', nombre: 'Proyectos Interdisciplinarios II (3 cr.)' },
      ]},
      { ciclo: 'Ciclo 4', cursos: [
        { id: 'metnum', nombre: 'Métodos Numéricos (3 cr.)', prerreq: ['ecdiff', 'algebra'] },
        { id: 'dinamica', nombre: 'Dinámica (4 cr.)', prerreq: ['estatica', 'calcVec'] },
        { id: 'estatica', nombre: 'Estática (4 cr.)', prerreq: ['mec1'] },
        { id: 'matIng', nombre: 'Ingeniería de Materiales (4 cr.)' },
        { id: 'maqelec', nombre: 'Máquinas Eléctricas (4 cr.)', prerreq: ['elecmag'] },
        { id: 'empresa', nombre: 'Empresa y Consumidor (3 cr.)' },
      ]},
      { ciclo: 'Ciclo 5', cursos: [
        { id: 'fluidos', nombre: 'Mecánica de Fluidos (4 cr.)', prerreq: ['ecdiff', 'estatica'] },
        { id: 'matMec', nombre: 'Mecánica de Materiales (4 cr.)', prerreq: ['estatica'] },
        { id: 'manuf', nombre: 'Procesos de Manufactura (4 cr.)', prerreq: ['matIng'] },
        { id: 'auto', nombre: 'Automatización de Sistemas (4 cr.)', prerreq: ['maqelec'] },
        { id: 'gob', nombre: 'Economía, Gobernanza y Poder (3 cr.)' },
        { id: 'proy3', nombre: 'Proyectos Interdisciplinarios III (3 cr.)' },
      ]},
      { ciclo: 'Ciclo 6', cursos: [
        { id: 'transfCalor', nombre: 'Transferencia de Calor (4 cr.)', prerreq: ['termo', 'fluidos'] },
        { id: 'disElem', nombre: 'Diseño de Elementos de Máquina (4 cr.)', prerreq: ['matMec'] },
        { id: 'minas', nombre: 'Introducción a la Ingeniería de Minas (4 cr.)' },
        { id: 'biomec', nombre: 'Principios de Biomecánica (4 cr.)', prerreq: ['matMec'] },
        { id: 'mantenimiento', nombre: 'Ingeniería de Mantenimiento (4 cr.)', prerreq: ['manuf'] },
      ]},
      { ciclo: 'Ciclo 7', cursos: [
        { id: 'maqterm', nombre: 'Máquinas Térmicas (4 cr.)', prerreq: ['transfCalor'] },
        { id: 'gpcontratos', nombre: 'Gestión de Proyectos y Contratos (4 cr.)', prerreq: ['empresa'] },
        { id: 'disSistMec', nombre: 'Diseño de Sistemas Mecánicos (4 cr.)', prerreq: ['disElem'] },
        { id: 'robotica', nombre: 'Robótica Industrial (4 cr.)', prerreq: ['auto'] },
        { id: 'etica', nombre: 'Ética y Tecnología (3 cr.)' },
        { id: 'finanzas', nombre: 'Finanzas Empresariales (3 cr.)', prerreq: ['gob'] },
      ]},
      { ciclo: 'Ciclo 8', cursos: [
        { id: 'preprof', nombre: 'Proyecto Preprofesional (8 cr.)' },
        { id: 'electivo1', nombre: 'Electivo de Carrera 1 (4 cr.)' },
        { id: 'evalFin', nombre: 'Evaluación Financiera de Proyectos (3 cr.)', prerreq: ['finanzas'] },
      ]},
      { ciclo: 'Ciclo 9', cursos: [
        { id: 'electivo2', nombre: 'Electivo de Carrera 2 (4 cr.)' },
        { id: 'libre1', nombre: 'Electivo Libre 1 (4 cr.)' },
        { id: 'libre2', nombre: 'Electivo Libre 2 (4 cr.)' },
        { id: 'arteTec', nombre: 'Arte y Tecnología (3 cr.)' },
        { id: 'estrategia', nombre: 'Estrategia y Organizaciones (3 cr.)' },
        { id: 'proj1', nombre: 'Proyecto Final I (4 cr.)' },
      ]},
      { ciclo: 'Ciclo 10', cursos: [
        { id: 'electivo3', nombre: 'Electivo de Carrera 3 (4 cr.)' },
        { id: 'libre3', nombre: 'Electivo Libre 3 (4 cr.)' },
        { id: 'libre4', nombre: 'Electivo Libre 4 (4 cr.)' },
        { id: 'proj2', nombre: 'Trabajo de Investigación II (4 cr.)' },
      ]}
    ];

    const progreso = JSON.parse(localStorage.getItem('progresoMalla')) || {};

    function renderMalla() {
      const contenedor = document.getElementById('contenedor');
      contenedor.innerHTML = '';

      cursos.forEach(ciclo => {
        const divCiclo = document.createElement('div');
        divCiclo.className = 'ciclo';
        const titulo = document.createElement('h2');
        titulo.textContent = ciclo.ciclo;
        divCiclo.appendChild(titulo);

        ciclo.cursos.forEach(curso => {
          const divCurso = document.createElement('div');
          divCurso.className = 'curso';
          divCurso.textContent = curso.nombre;

          const completado = progreso[curso.id];
          const prerreqs = curso.prerreq || [];
          const faltantes = prerreqs.filter(p => !progreso[p]);

          if (completado) divCurso.classList.add('aprobado');
          if (faltantes.length > 0) {
            divCurso.classList.add('bloqueado');
            const tooltip = document.createElement('span');
            tooltip.className = 'tooltip';
            tooltip.textContent = 'Falta: ' + faltantes.map(id => cursos.flatMap(c => c.cursos).find(c => c.id === id).nombre).join(', ');
            divCurso.appendChild(tooltip);
          } else {
            divCurso.addEventListener('click', () => {
              progreso[curso.id] = !progreso[curso.id];
              localStorage.setItem('progresoMalla', JSON.stringify(progreso));
              renderMalla();
            });
          }

          divCiclo.appendChild(divCurso);
        });

        contenedor.appendChild(divCiclo);
      });
    }

    renderMalla();
  </script>
</body>
</html>
