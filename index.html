<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular Ingenier√≠a Mec√°nica - UTEC</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f8fb;
      color: #333;
      padding: 2rem;
      margin: 0;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .ciclo {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .ciclo h2 {
      margin-top: 0;
      font-size: 1.2rem;
      background: #dfefff;
      padding: 0.5rem;
      border-radius: 8px;
    }
    .curso {
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 8px;
      transition: background 0.3s;
      position: relative;
    }
    .curso.aprobado {
      background: #d4edda;
      text-decoration: line-through;
    }
    .curso.bloqueado {
      background: #f8d7da;
      cursor: not-allowed;
    }
    .curso:hover:not(.bloqueado) {
      background: #d0e8ff;
      cursor: pointer;
    }
    .tooltip {
      display: none;
      position: absolute;
      left: 100%;
      top: 50%;
      transform: translateY(-50%);
      background: #333;
      color: #fff;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      white-space: nowrap;
      margin-left: 8px;
      font-size: 0.8rem;
    }
    .curso.bloqueado:hover .tooltip {
      display: block;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ingenier√≠a Mec√°nica (UTEC)</h1>
  <div id="malla"></div>

  <script>
    const data = {
      "Ciclo 1 (20‚ÄØcr√©ditos)": [
        "Programaci√≥n‚ÄØI",
        "C√°lculo de una Variable",
        "Qu√≠mica General + Lab. Qu√≠mica",
        "Introducci√≥n a la Ingenier√≠a Mec√°nica",
        "Laboratorio de Comunicaci√≥n I",
        "Proyectos Interdisciplinarios I"
      ],
      "üîß Ciclo 2 (20‚ÄØcr√©ditos)": [
        { nombre: "Introducci√≥n a la Mec√°nica", prereqs: ["C√°lculo de una Variable"] },
        { nombre: "Programaci√≥n‚ÄØII", prereqs: ["Programaci√≥n‚ÄØI"] },
        { nombre: "C√°lculo Vectorial", prereqs: ["C√°lculo de una Variable"] },
        "√Ålgebra Lineal",
        { nombre: "Estad√≠stica y Probabilidades I", prereqs: ["C√°lculo de una Variable"] },
        "Lab. Comunicaci√≥n II"
      ],
      "‚öôÔ∏è Ciclo 3 (21‚ÄØcr√©ditos)": [
        { nombre: "Fundamentos de Electricidad y Magnetismo", prereqs: ["C√°lculo Vectorial"] },
        { nombre: "Termodin√°mica", prereqs: ["C√°lculo Vectorial"] },
        { nombre: "Ecuaciones Diferenciales", prereqs: ["C√°lculo de una Variable"] },
        "Dibujo y Dise√±o para Ingenier√≠a",
        "Per√∫: Temas de la Sociedad Contempor√°nea",
        "Proyectos Interdisciplinarios II"
      ],
      "‚öóÔ∏è Ciclo 4 (22‚ÄØcr√©ditos)": [
        { nombre: "M√©todos Num√©ricos", prereqs: ["Ecuaciones Diferenciales", "√Ålgebra Lineal"] },
        { nombre: "Din√°mica", prereqs: ["Est√°tica", "C√°lculo Vectorial"] },
        { nombre: "Est√°tica", prereqs: ["Introducci√≥n a la Mec√°nica"] },
        "Ingenier√≠a de Materiales",
        { nombre: "M√°quinas El√©ctricas", prereqs: ["Fundamentos de Electricidad y Magnetismo"] },
        "Empresa y Consumidor"
      ],
      "üõ†Ô∏è Ciclo 5 (22‚ÄØcr√©ditos)": [
        { nombre: "Mec√°nica de Fluidos", prereqs: ["Ecuaciones Diferenciales", "Est√°tica"] },
        { nombre: "Mec√°nica de Materiales", prereqs: ["Est√°tica"] },
        { nombre: "Procesos de Manufactura", prereqs: ["Ingenier√≠a de Materiales"] },
        { nombre: "Automatizaci√≥n de Sistemas", prereqs: ["M√°quinas El√©ctricas"] },
        "Econom√≠a, Gobernanza y Relaciones de Poder",
        "Proyectos Interdisciplinarios III"
      ],
      "üî• Ciclo 6 (20‚ÄØcr√©ditos)": [
        { nombre: "Transferencia de Calor", prereqs: ["Termodin√°mica", "Mec√°nica de Fluidos"] },
        { nombre: "Dise√±o de Elementos de M√°quina", prereqs: ["Mec√°nica de Materiales"] },
        "Introducci√≥n a la Ingenier√≠a de Minas",
        { nombre: "Principios de Biomec√°nica", prereqs: ["Mec√°nica de Materiales"] },
        { nombre: "Ingenier√≠a de Mantenimiento", prereqs: ["Procesos de Manufactura"] }
      ],
      "üè≠ Ciclo 7 (22‚ÄØcr√©ditos)": [
        { nombre: "M√°quinas T√©rmicas", prereqs: ["Transferencia de Calor"] },
        { nombre: "Gesti√≥n de Proyectos y Contratos", prereqs: ["Empresa y Consumidor"] },
        { nombre: "Dise√±o de Sistemas Mec√°nicos", prereqs: ["Dise√±o de Elementos de M√°quina"] },
        { nombre: "Rob√≥tica Industrial", prereqs: ["Automatizaci√≥n de Sistemas"] },
        "√âtica y Tecnolog√≠a",
        { nombre: "Finanzas Empresariales", prereqs: ["Econom√≠a, Gobernanza y Relaciones de Poder"] }
      ],
      "üéì Ciclo 8 (15‚ÄØcr√©ditos)": [
        "Proyecto Preprofesional",
        "Electivo de Carrera 1",
        { nombre: "Evaluaci√≥n Financiera de Proyectos", prereqs: ["Finanzas Empresariales"] }
      ],
      "üìö Ciclo 9 (22‚ÄØcr√©ditos)": [
        "Electivo de Carrera 2",
        "Electivo Libre 1",
        "Electivo Libre 2",
        "Arte y Tecnolog√≠a",
        "Estrategia y Organizaciones",
        "Proyecto Final I (Trabajo de Investigaci√≥n)"
      ],
      "üõé Ciclo 10 (16‚ÄØcr√©ditos)": [
        "Electivo de Carrera 3",
        "Electivo Libre 3",
        "Electivo Libre 4",
        "Trabajo de Investigaci√≥n II"
      ]
    };

    const aprobadas = new Set(JSON.parse(localStorage.getItem('mecanica_utec_aprobados') || '[]'));

    function guardarProgreso() {
      localStorage.setItem('mecanica_utec_aprobados', JSON.stringify([...aprobadas]));
    }

    function crearCurso(nombre, prereqs = []) {
      const div = document.createElement('div');
      div.className = 'curso';
      div.textContent = nombre;

      const bloqueado = prereqs.some(req => !aprobadas.has(req));

      if (bloqueado) {
        div.classList.add('bloqueado');
        const tooltip = document.createElement('span');
        tooltip.className = 'tooltip';
        tooltip.textContent = `Requiere: ${prereqs.filter(req => !aprobadas.has(req)).join(', ')}`;
        div.appendChild(tooltip);
      } else {
        div.addEventListener('click', () => {
          if (aprobadas.has(nombre)) {
            aprobadas.delete(nombre);
          } else {
            aprobadas.add(nombre);
          }
          guardarProgreso();
          render();
        });
      }

      if (aprobadas.has(nombre)) div.classList.add('aprobado');

      return div;
    }

    function render() {
      const malla = document.getElementById('malla');
      malla.innerHTML = '';
      Object.entries(data).forEach(([ciclo, cursos]) => {
        const cicloDiv = document.createElement('div');
        cicloDiv.className = 'ciclo';

        const h2 = document.createElement('h2');
        h2.textContent = ciclo;
        cicloDiv.appendChild(h2);

        cursos.forEach(c => {
          if (typeof c === 'string') c = { nombre: c };
          const cursoEl = crearCurso(c.nombre, c.prereqs || []);
          cicloDiv.appendChild(cursoEl);
        });

        malla.appendChild(cicloDiv);
      });
    }

    render();
  </script>
</body>
</html>
